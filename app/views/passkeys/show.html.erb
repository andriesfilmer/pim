<%= render "passkeys/secondary_menu" unless @passkey.try(:org_id) %>
<%= render "passkeys/restore_menu" if @passkey.try(:org_id) %>

<div class="row" data-controller="passkey">
  <div class="columns">
    <h2><%= @passkey.title %></h2>
  </div>
  <div class="columns">
    <%= label_tag :username, nil, class: "label-th" %>
  </div>
  <div class="columns small-10 medium-11">
    <%= content_tag :div, @passkey.username, id: "username" %>
  </div>
  <div class="columns small-2 medium-1">
    <div data-action="click->passkey#copyUsername" class="label-button display-inline notice-color">Copy</div>
  </div>
  <div class="columns">
    <%= label_tag :password, nil, class: "label-th display-inline" %>
    <%= image_tag "visibility.svg", id: "passwordToggle", class: "icon medium",
      data: { "action": "click->passkey#togglePassword" } %>
  </div>
  <div class="columns small-10 medium-11">
    <%= password_field_tag 'password', @passkey.password,
      data: { "passkey_target": "passwordToggle", "action": "click->passkey#togglePassword" }  %>
  </div>
  <div class="columns small-2 medium-1">
    <div data-action="click->passkey#copyPassword" class="label-button display-inline notice-color">Copy</div>
  </div>
  <div class="columns">
    <%= label_tag :url, nil, class: "label-th" %>
    <%= link_to @passkey.url, @passkey.url, target: "_blank" %>
  </div>
</div>

<%= content_tag :div, class: "row", data: { controller: "passkey" } do %>
  <div class="columns">
    <%= label_tag :notes, nil, class:"label-th display-inline" %>
    <%= image_tag "visibility.svg", id: "notesToggle", class: "icon medium",
      data: { "action": "click->passkey#toggleNotes" } %>
    <%= content_tag :pre, @passkey.notes, id: "notes", class: "display-none" %>
    <div id="markdown" class="callout hide-notes" style="background:#eee;color: #000;"
      data-passkey-target="notesToggle" data-action="click->passkey#toggleNotes">Toggle visibility notes</div>
  </div>
<% end if @passkey.notes.present? %>

<div class="row">
  <div class="columns">
    <%= content_tag :div, '', id: "tagsContainer" if @passkey.tags.present? %>
    <%= hidden_field_tag "passkey_tags", @passkey.tags %>
  </div>
</div>

<div class="row">
  <div class="columns"><label class="label-th"></label></div>
  <div class="columns small-6 medium-6 meta-data">Created: <%= l @passkey.created_at, format: :default %></div>
  <div class="columns small-6 medium-6 meta-data">Updated: <%= l @passkey.updated_at, format: :default %></div>
</div>
