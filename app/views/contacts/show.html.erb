<div class="row secondary-menu">
  <div class="columns small-6 medium-6">
    <span class="ib-star<%= @contact.starred? ? '-filled' : '' %>"></span>
    <span class="divider"></span>
    <%= link_to "", edit_contact_path(@contact), class: "ib-edit" %>
    <span class="divider"></span>
  </div>
  <div class="columns small-6 medium-6 text-right">
    <span class="divider"></span>
    <%= link_to "", contact_path(@contact, format: :html),
      data: { turbo_method: :delete, turbo_confirm: "Are you sure to delete this contact?"}, class: "ib-trash" %>
  </div>
</div>

<div class="row">
  <div class="columns">
    <%= content_tag(:label, " #{get_birthday_age(@contact)}",
      class: "ib-cake icon-medium float-right") if @contact.birthdate %>
    <h3><%= @contact.name %></h3>
  </div>
</div>

<div class="row">
  <div class="medium-6 columns">
    <div class="medium-6 columns">
      <%= label_tag :phones, nil, class:"label-th" unless @contact.phones.include?("[]") %>
      <% JSON.parse(@contact.phones).each do | phone | %>
      <div class="row">
        <div class="medium-10 columns">
          <%= label_tag phone["type"] %>
          <span class="float-right ib-call icon-medium"></span>
          <%= phone["value"] %>
        </div>
      </div>
      <% end %>
    </div>
    <div class="medium-6 columns">
      <%= label_tag :emails, nil, class:"label-th" unless @contact.emails.include?("[]") %>
      <% JSON.parse(@contact.emails).each do | email | %>
      <div class="row">
        <div class="medium-10 columns">
          <%= label_tag email["type"] %>
          <span class="float-right ib-mail icon-medium"></span>
          <%= email["value"] %>
        </div>
      </div>
      <% end %>
    </div>
    <div class="medium-6 columns">
      <%= label_tag :addresses, nil, class:"label-th" unless @contact.addresses.include?("[]") %>
      <% JSON.parse(@contact.addresses).each do | address | %>
      <div class="row">
        <div class="medium-10 columns">
          <%= label_tag address["type"] %>
          <span class="float-right ib-location-on icon-medium"></span>
          <%= address["value"] %>
        </div>
      </div>
      <% end %>
    </div>
    <div class="medium-6 columns">
      <%= label_tag :companies, nil, class:"label-th" unless @contact.companies.include?("[]") %>
      <% JSON.parse(@contact.companies).each do | company | %>
      <div class="row">
        <div class="medium-10 columns">
          <%= label_tag company["type"] %>
          <span class="float-right ib-apartment icon-medium"></span>
          <%= company["value"] %>
        </div>
      </div>
      <% end %>
    </div>
    <div class="medium-6 columns">
      <%= label_tag :websites, nil, class:"label-th" unless @contact.websites.include?("[]") %>
      <% JSON.parse(@contact.websites).each do | website | %>
      <div class="row">
        <div class="medium-10 columns">
          <%= label_tag website["type"] %>
          <span class="float-right ib-link icon-medium"></span>
          <%= website["value"] %>
        </div>
      </div>
      <% end %>
    </div>
  </div>
  <div class="medium-6 columns">
    <label class="label-th">Notes</label>
    <%= content_tag :pre, @contact.notes, id: "notes", class: "display-none" %>
    <div data-controller="contact" id="markdown"></div>
  </div>
</div>

<div class="row">
  <div class="columns"><label class="label-th"></label></div>
  <div class="columns small-6 medium-6 meta-data">Created: <%= l @contact.created_at, format: :long %></div>
  <div class="columns small-6 medium-6 meta-data">Updated: <%= l @contact.updated_at, format: :long %></div>
</div>
<%= form_with model: @contact, id: "contactForm" do |form| %>
  <%= form.hidden_field :starred %>
<% end %>
